/*
 * This file was generated by the Gradle 'init' task.
 */

plugins {
    id 'com.boomi.connector' version "${boomiConnectorVersion}"
    id "com.github.hierynomus.license-report" version"${hierynomusLicenseReport}"
    id 'net.researchgate.release' version "${releasePluginVersion}"
    id 'jacoco'
}

connector {
    sdkVersion "${sdkBoomiVersion}"
    className "com.boomi.connector.jmssdk.JMSConnector"
}

repositories {
    mavenCentral()
}

dependencies {
    api(
            [group: 'com.boomi.connsdk', name: 'connector-sdk-util', version: sdkBoomiVersion],
            [group: 'com.boomi.util', name: 'boomi-util', version: '2.3.12'],
            [group: 'com.boomi.util', name: 'common-lite', version: '1.1.0'],
            [group: 'com.boomi.util', name: 'boomi-json-util', version: '1.1.9'],
            [group: 'javax.jms', name: 'javax.jms-api', version: '2.0.1'],
            [group: 'commons-pool', name: 'commons-pool', version: '1.6'],
            [group: 'com.fasterxml.jackson.core', name: 'jackson-databind', version: '2.13.4.2'],
    )
    implementation(
            [group: 'com.oracle.database.jdbc', name: 'ojdbc8', version: '18.15.0.0'],
            [group: 'com.oracle.database.messaging', name: 'aqapi', version: '19.3.0.0'],
            [group: 'com.ibm.mq', name: 'com.ibm.mq.allclient', version: '9.3.4.1']
    )
    testImplementation(
            [group: 'junit', name: 'junit', version: '4.13.1'],
            [group: 'org.powermock', name: 'powermock-api-mockito', version: '1.6.1'],
            [group: 'org.powermock', name: 'powermock-module-junit4', version: '1.6.1'],
    )
}

configurations.connectorSamplesImplementation {
    exclude group: "com.boomi.util", module: "boomi-util"
    exclude group: "com.fasterxml.jackson.core", module: "jackson-databind"
}

sourceCompatibility = 1.8
targetCompatibility = 1.8

test {
    finalizedBy jacocoTestReport
}

jacocoTestReport {
    reports {
        xml.required = true
    }
}

downloadLicenses {
    dependencyConfiguration "connectorLib"
    reportByLicenseType false
    report {
        xml.enabled = false
        html.enabled = false
    }
}

release {
    preTagCommitMessage = '[Gradle Release Plugin] - release tag: '
    newVersionCommitMessage = '[skip ci] [Gradle Release Plugin] - increment version for next development iteration: '
    git {
        requireBranch.set('master')
        pushOptions.set(['--dry-run'])
        buildTasks.set(["build"])
    }
}
